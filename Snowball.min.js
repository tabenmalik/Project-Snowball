function newButton(args){var radius=args.radius,color=args.color,x=args.x,y=args.y,x_offset=0,y_offset=0,text=args.text,text_x=0,text_y=0,text_x_offset=0,text_y_offset=0,__setColor__=function(new_color){color=new_color},__setText__=function(new_text){text=new_text},__update__=function(args){var mouse_x=args.mouse.getX()-args.can.width/2,mouse_y=args.mouse.getY()-args.can.height/2;x_offset=.0625*mouse_x,y_offset=.0625*mouse_y,args.ctx.font="30px Verdana",text_x=x-radius+(2*radius-args.ctx.measureText(text).width)/2,text_y=y+15,text_x_offset=.125*mouse_x,text_y_offset=.125*mouse_y},__draw__=function(ctx){ctx.fillStyle=color,ctx.beginPath(),ctx.arc(x-x_offset,y-y_offset,radius,0,2*Math.PI),ctx.closePath(),ctx.fill(),ctx.fillStyle="#000000",ctx.font="30px Verdana",ctx.fillText(text,text_x-text_x_offset,text_y-text_y_offset)};return{update:__update__,draw:__draw__,setColor:__setColor__,setText:__setText__}}function newSnowball(){var can=document.getElementById("canvas"),ctx=can.getContext("2d"),update_interval=1e3/60,accumulate=0,last_tick_time=0,mouse=newMouse(),keyboard=newKeyboard(),options_menu=newOptionsMenu(),__tick__=function(time){var delta_time=time-last_tick_time;for(ctx.clearRect(0,0,can.width,can.height),ctx.beginPath(),options_menu.draw(ctx),accumulate+=delta_time;accumulate>=update_interval;)options_menu.update({ctx:ctx,can:can,time:time,mouse:mouse,keyboard:keyboard}),accumulate-=update_interval;last_tick_time=time,window.requestAnimationFrame(__tick__)},__start__=function(){window.requestAnimationFrame(__tick__)};return{tick:__tick__,start:__start__}}function newTitle(args){var x=args.x,y=args.y,x_offset=0,y_offset=0,width=args.width,height=args.height,text=args.text,text_x=0,text_y=0,text_x_offset=0,text_y_offset=0,__draw__=function(ctx){ctx.fillStyle="#5555ff",ctx.fillRect(x-x_offset,y-y_offset,width,height),ctx.fillStyle="#999999",ctx.font="bold 60px Verdana",ctx.fillText(text,text_x-x_offset,text_y-y_offset),ctx.fillStyle="#000000",ctx.fillText(text,text_x-text_x_offset,text_y-text_y_offset)},__update__=function(args){var mouse_x=args.mouse.getX()-args.can.width/2,mouse_y=args.mouse.getY()-args.can.height/2;x_offset=.0625*mouse_x,y_offset=.0625*mouse_y,args.ctx.font="bold 60px Verdana",text_x=(width-args.ctx.measureText(text).width)/2+x,text_y=(height+60)/2+y,text_x_offset=.125*mouse_x,text_y_offset=.125*mouse_y};return{draw:__draw__,update:__update__}}var newKeyboard=function(){var w=!1,a=!1,s=!1,d=!1,space=!1,p=!1;document.onkeydown=function(event){switch(event.keyCode){case 87:w=!0;break;case 65:a=!0;break;case 83:s=!0;break;case 68:d=!0;break;case 32:space=!0;break;case 80:p=!0;break;default:event.preventDefault()}},document.onkeyup=function(event){switch(event.keyCode){case 87:w=!1;break;case 65:a=!1;break;case 83:s=!1;break;case 68:d=!1;break;case 32:space=!1;break;case 80:p=!1;break;default:event.preventDefault()}};var __isWPressed__=function(){return w},__isAPressed__=function(){return a},__isSPressed__=function(){return s},__isDPressed__=function(){return d},__isSpacePressed__=function(){return space},__isPPressed__=function(){return p};return{isWPressed:__isWPressed__,isAPressed:__isAPressed__,isSPressed:__isSPressed__,isDPressed:__isDPressed__,isSpacePressed:__isSpacePressed__,isPPressed:__isPPressed__}},newMenu=function(){var title=newTitle({x:100,y:125,width:600,height:100,text:"Snowball"}),play_button=newButton({x:400,y:400,radius:70,text:"PLAY",color:"#5555ff"}),option_button=newButton({x:600,y:500,radius:70,text:"Options",color:"#5555ff"}),instruction_button=newButton({x:200,y:500,radius:70,text:"How To",color:"#5555ff"}),__draw__=function(ctx){title.draw(ctx),play_button.draw(ctx),option_button.draw(ctx),instruction_button.draw(ctx)},__update__=function(args){title.update(args),play_button.update(args),option_button.update(args),instruction_button.update(args)};return{draw:__draw__,update:__update__}},newMouse=function(){var x=0,y=0,clicked=!1;can=document.getElementById("canvas"),can.onmousedown=function(){clicked=!0},can.onmouseup=function(){return clicked=!1,!1},can.onmousemove=function(){__setMousePosition__(event)};var __isClicked__=function(){return clicked},__setMousePosition__=function(){var can=document.getElementById("canvas");1==arguments.length?(x=arguments[0].clientX-can.getBoundingClientRect().left,y=arguments[0].clientY-can.getBoundingClientRect().top+.875):2==arguments.length&&(x=arguments[0],y=arguments[1])},__getX__=function(){document.getElementById("canvas");return x},__getY__=function(){document.getElementById("canvas");return y};return{setMousePosition:__setMousePosition__,isClicked:__isClicked__,getY:__getY__,getX:__getX__}},newOptionsMenu=function(){var title=newTitle({x:100,y:60,width:600,height:100,text:"Options"}),back_button=newButton({x:100,y:500,radius:50,color:"#5555ff",text:"Back"}),music_button=newButton({x:200,y:230,radius:50,color:"#5555ff",text:"Music"}),sound_button=newButton({x:200,y:360,radius:50,color:"#5555ff",text:"Sound"}),__draw__=function(ctx){title.draw(ctx),back_button.draw(ctx),music_button.draw(ctx),sound_button.draw(ctx)},__update__=function(args){title.update(args),back_button.update(args),music_button.update(args),sound_button.update(args)};return{draw:__draw__,update:__update__}};
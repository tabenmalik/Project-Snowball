<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Project Snowball</title>
	
	<link rel="stylesheet" type="text/css" href="css/theme.css">
	
	<script type="text/javascript" src="Objects.js"></script>
	<script type="text/javascript" src="RandomFunctions.js"></script>
	<script type="text/javascript" src="javascript/devFunctions.js"></script>
	<script type="text/javascript" src="javascript/pageAdjust.js"></script>
	<script type="text/javascript"></script>
</head>
<body>
	<div id="banner">
		<h1 id="title">Snowball</h1>
	</div>
	
	<canvas id='canvas' width='800' height='800'></canvas>
	
	<div id="footer">
		<div class="container">
			<ul>
				<li>Created By: Wolf Pack</li>
				<li>Last Updated 11 Dec. 2014</li>
				<li>Source Code at <a href="https://github.com/tabenmalik/Project-Snowball">github.com</a></li>
			</ul>
		</div>
	</div>
	
	<script type='text/javascript'>
	document.getElementById('canvas').onmousedown = function(){
		return false;
	};
	
	
	//************PLAY FUNCTIONS***************
	
	function playUpdate(time){
		pl.circle(time, thing.x, thing.y);
	}
	
	function playDraw(){
		ctx.clearRect(0,0,can.width, can.height);
	
		ctx.beginPath();
		ctx.arc(pl.x, pl.y, pl.r, 0, Math.PI * 2);
		ctx.closePath();
		ctx.fill();
		
		ctx.beginPath();
		ctx.arc(thing.x, thing.y, thing.r, 0, Math.PI * 2);
		ctx.closePath();
		ctx.fill();
	}
	
	function playSetup(){
		update = playUpdate;
		draw = playDraw;
	}
	
	//************MAIN MENU FUNCTIONS**********
	var playButton = {
		x: 400,
		y: 400,
		r: 100,
	};
	
	var playTitle = {
		x: 100,
		y: 125,
		width: 600,
		height: 100,
	};
	
	var xfrontoffset = 0;
	var yfrontoffset = 0;
	var xbackoffset = 0;
	var ybackoffset = 0;
	
	var pl = new Ball(100,100,10);
	var thing = {
		x: 300,
		y: 400,
		r: 50
	};
	
	function menuUpdate(time){
		var x = (mouse.x - (can.width * 0.5));
		var y = (mouse.y - (can.height* 0.5));
		
		xfrontoffset = x * 0.125;
		yfrontoffset = y * 0.125;
		
		xbackoffset = x * 0.0625;
		ybackoffset = y * 0.0625;
		
		var ms = {
			x: mouse.x,
			y: mouse.y,
			r: 0
		};
		
		var pb = {
			x: playButton.x - xbackoffset,
			y: playButton.y - ybackoffset,
			r: playButton.r
		};
		
		if(collide(ms,pb) && mouse.clicked){
			playSetup();
		}
	}
	
	function menuDraw(){
		ctx.clearRect(0,0,can.width,can.height);
		
		ctx.fillStyle = "#5555FF";
		ctx.beginPath();
		ctx.arc(playButton.x - xbackoffset, playButton.y - ybackoffset, playButton.r, 0, 2*Math.PI);
		ctx.closePath();
		ctx.fill();
		
		ctx.fillRect(playTitle.x - xbackoffset, playTitle.y - ybackoffset, playTitle.width, playTitle.height);
		
		ctx.fillStyle = "#999999";
		ctx.font = "bold 60px Verdana";
		ctx.fillText("Project Snowball",115 - xbackoffset ,200 - ybackoffset );
		ctx.fillStyle = "#000000";
		ctx.fillText("Project Snowball",115 - xfrontoffset,200 - yfrontoffset);
		ctx.font = "30px Verdana";
		ctx.fillText("PLAY",360 - xfrontoffset, 415 - yfrontoffset);
	}
	
	function menuSetup(){
		update = menuUpdate;
		draw = menuDraw;
	}
	
	//**********TICK FUNCTION**********
	
	function tick(time){
		var deltaTime = time - lastTickTime;
		
		draw();
		
		accumulate += deltaTime;
		
		while(accumulate >= UPDATEINTERVAL){
			update(UPDATEINTERVAL);
			accumulate -= UPDATEINTERVAL;
			mouse.clicked = false;
		}
		
		lastTickTime = time;
		window.requestAnimationFrame(tick);
	}
	
	function main(){
		log("Setting up Main Menu");
		menuSetup();
		window.requestAnimationFrame(tick);
	}
	
	var game = new Game();
	game.setup();
	game.run();
	
	</script>
</html>